import{I as j}from"./chunk-JHATTPS3-DKo14Q46.js";import{P as p}from"./chunk-P3UUX2T6-DGyE1nBA.js";import{u as _,_ as S}from"./chunk-B2JT2FOA-BFVWJL_Y.js";import{a as w,j as i,b as h,u as N,r as x,dU as I,H as C,T as P,B as T,L as q,cX as z,dY as E,A as O}from"./index-D74VZicr.js";import"./lodash-C3PD2ekC.js";import"./chunk-GJUPECDU-CUvKLvXY.js";import{S as A}from"./chunk-2RQLKDBF-CRfPvG9o.js";import{u as L}from"./chunk-C76H5USB-Ce1tsiqW.js";import{u as R}from"./use-prompt-CRSTwx-a.js";import{P as D}from"./pencil-square-g8piE3Q4.js";import{T as J}from"./trash-cIiu2Oqm.js";import{C as H}from"./container-Cnmft9hW.js";import{C as v}from"./checkbox-DJdqh7xC.js";import{c as Y}from"./index-C0zoA6P7.js";import"./chunk-YEDAFXMB-EG3Il2Ib.js";import"./chunk-AOFGTNG6-CCkopaX-.js";import"./table-G1LZX65g.js";import"./chunk-EMIHDNB7-Ds_dQKw4.js";import"./plus-mini-DfILc17B.js";import"./command-bar-ROzGwv8G.js";import"./index-BcAb1RV0.js";import"./chunk-PFKKVLZX-CY_3tgzw.js";import"./format-CmFbXyAA.js";import"./_isIndex-BrU7fnJc.js";import"./x-mark-mini-B3c1aB5f.js";import"./date-picker-DyS2dpZE.js";import"./clsx-B-dksMZM.js";import"./popover-s5_19JFt.js";import"./triangle-left-mini-Bh3lkkJP.js";import"./index-D3PzSEbV.js";import"./Trans-0tDoEjgh.js";import"./check-Do_dv9fg.js";import"./prompt-BZsXodYH.js";var $=({item:t})=>{const{t:s}=h(),e=R(),{mutateAsync:a}=E(t.id),n=async()=>{await e({title:s("general.areYouSure"),description:s("inventory.deleteWarning"),confirmText:s("actions.delete"),cancelText:s("actions.cancel")})&&await a()};return i.jsx(O,{groups:[{actions:[{icon:i.jsx(D,{}),label:s("actions.edit"),to:`${t.id}/edit`}]},{actions:[{icon:i.jsx(J,{}),label:s("actions.delete"),onClick:n}]}]})},o=Y(),B=()=>{const{t}=h();return x.useMemo(()=>[o.display({id:"select",header:({table:s})=>i.jsx(v,{checked:s.getIsSomePageRowsSelected()?"indeterminate":s.getIsAllPageRowsSelected(),onCheckedChange:e=>s.toggleAllPageRowsSelected(!!e)}),cell:({row:s})=>i.jsx(v,{checked:s.getIsSelected(),onCheckedChange:e=>s.toggleSelected(!!e),onClick:e=>{e.stopPropagation()}})}),o.accessor("title",{header:t("fields.title"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(p,{})}}),o.accessor("sku",{header:t("fields.sku"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(p,{})}}),o.accessor("reserved_quantity",{header:t("inventory.reserved"),cell:({getValue:s})=>{const e=s();return Number.isNaN(e)?i.jsx(p,{}):i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})})}}),o.accessor("stocked_quantity",{header:t("fields.inStock"),cell:({getValue:s})=>{const e=s();return Number.isNaN(e)?i.jsx(p,{}):i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})})}}),o.display({id:"actions",cell:({row:s})=>i.jsx($,{item:s.original})})],[t])},M=()=>{const{t}=h(),{stock_locations:s}=z({limit:1e3}),e=[];if(s){const a={type:"select",options:s.map(n=>({label:n.name,value:n.id})),key:"location_id",searchable:!0,label:t("fields.location")};e.push(a)}return e.push({type:"string",key:"material",label:t("fields.material")}),e.push({type:"string",key:"sku",label:t("fields.sku")}),e.push({type:"string",key:"mid_code",label:t("fields.midCode")}),e.push({type:"number",key:"height",label:t("fields.height")}),e.push({type:"number",key:"width",label:t("fields.width")}),e.push({type:"number",key:"length",label:t("fields.length")}),e.push({type:"number",key:"weight",label:t("fields.weight")}),e.push({type:"select",options:[{label:t("fields.true"),value:"true"},{label:t("fields.false"),value:"false"}],key:"requires_shipping",multiple:!1,label:t("fields.requiresShipping")}),e},F=({pageSize:t=20,prefix:s})=>{const e=L(["id","location_id","q","order","requires_shipping","offset","sku","origin_country","material","mid_code","hs_code","order","weight","width","length","height"],s),{offset:a,weight:n,width:l,length:u,height:c,requires_shipping:m,...r}=e;return{searchParams:{limit:t,offset:a?parseInt(a):void 0,weight:n?JSON.parse(n):void 0,width:l?JSON.parse(l):void 0,length:u?JSON.parse(u):void 0,height:c?JSON.parse(c):void 0,requires_shipping:m?JSON.parse(m):void 0,q:r.q,sku:r.sku,order:r.order,mid_code:r.mid_code,hs_code:r.hs_code,material:r.material,location_levels:{location_id:r.location_id||[]},id:r.id?r.id.split(","):void 0},raw:e}},f=20,Q=()=>{const{t}=h(),s=N(),[e,a]=x.useState({}),{searchParams:n,raw:l}=F({pageSize:f}),{inventory_items:u,count:c,isPending:m,isError:r,error:y}=I({...n}),b=M(),g=B(),{table:k}=_({data:u??[],columns:g,count:c,enablePagination:!0,getRowId:d=>d.id,pageSize:f,enableRowSelection:!0,rowSelection:{state:e,updater:a}});if(r)throw y;return i.jsxs(H,{className:"divide-y p-0",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[i.jsxs("div",{children:[i.jsx(C,{children:t("inventory.domain")}),i.jsx(P,{className:"text-ui-fg-subtle",size:"small",children:t("inventory.subtitle")})]}),i.jsx(T,{size:"small",variant:"secondary",asChild:!0,children:i.jsx(q,{to:"create",children:t("actions.create")})})]}),i.jsx(S,{table:k,columns:g,pageSize:f,count:c,isLoading:m,pagination:!0,search:!0,filters:b,queryObject:l,orderBy:[{key:"title",label:t("fields.title")},{key:"sku",label:t("fields.sku")},{key:"stocked_quantity",label:t("fields.inStock")},{key:"reserved_quantity",label:t("inventory.reserved")}],navigateTo:d=>`${d.id}`,commands:[{action:async d=>{s(`stock?${j}=${Object.keys(d).join(",")}`)},label:t("inventory.stock.action"),shortcut:"i"}]})]})},Ne=()=>{const{getWidgets:t}=w();return i.jsx(A,{widgets:{after:t("inventory_item.list.after"),before:t("inventory_item.list.before")},children:i.jsx(Q,{})})};export{Ne as Component};
